<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Clientes</title>
</head>
<body>
  <h2>Lista de Clientes</h2>
  <div id="usuarioInfo"></div>
  <table border="1">
    <thead>
      <tr>
        <th>ID</th><th>Nombre</th><th>Apellido</th><th>Tel√©fono</th>
      </tr>
    </thead>
    <tbody id="tablaClientes"></tbody>
  </table>

  <script>
    
    const user = JSON.parse(localStorage.getItem("usuario"));
    if (!user) window.location.href = "/"; 

    
    document.getElementById("usuarioInfo").innerText = `Usuario: ${user.nombre} | Rol: ${user.rol}`;
    async function loadClientes() {
      const res = await fetch("/api/clientes", {
        headers: { "x-user-id": user.id_usuario } 
      });
      const clientes = await res.json();
      const tbody = document.getElementById("tablaClientes");
      tbody.innerHTML = "";
      clientes.forEach(c => {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td>${c.id_cliente}</td><td>${c.nombre}</td><td>${c.apellido}</td><td>${c.telefono}</td>`;
        tbody.appendChild(tr);
      });
    }

    loadClientes();
  </script>
</body>
</html>